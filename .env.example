# =============================================================================
# KARNALI DIGITAL TRADE PLATFORM - ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# ENVIRONMENT
# -----------------------------------------------------------------------------
NODE_ENV=development
PORT=3000

# -----------------------------------------------------------------------------
# DATABASE
# -----------------------------------------------------------------------------
# Local Development (Docker)
DATABASE_URL=postgresql://karnali:karnali_dev_password@localhost:5432/karnali_trade

# Production (Render.com example)
# DATABASE_URL=postgresql://user:password@host:5432/database?sslmode=require

# -----------------------------------------------------------------------------
# REDIS (for BullMQ)
# -----------------------------------------------------------------------------
# Local Development
REDIS_URL=redis://localhost:6379

# Production (Render.com example)
# REDIS_URL=rediss://user:password@host:6379

# -----------------------------------------------------------------------------
# JWT & SECURITY
# -----------------------------------------------------------------------------
JWT_SECRET=your_super_secret_jwt_key_change_this_in_production
JWT_EXPIRES_IN=7d
JWT_ACCESS_EXPIRATION_MINUTES=30
JWT_REFRESH_EXPIRATION_DAYS=30


# -----------------------------------------------------------------------------
# TWILIO (WhatsApp Integration)
# -----------------------------------------------------------------------------
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=+1234567890
TWILIO_WHATSAPP_NUMBER=whatsapp:+1234567890

# Webhook URL (for signature verification) - MUST MATCH TWILIO CONFIG EXACTLY!
# Local: Use ngrok or serveo
# WEBHOOK_URL=https://your-ngrok-url.ngrok.io/api/v1/whatsapp/webhook
# Production: Use your domain
# WEBHOOK_URL=https://your-domain.com/api/v1/whatsapp/webhook

# =============================================================================
# PRODUCTION TWILIO CONFIGURATION (LIVE MODE)
# =============================================================================

# Status callback URL for message delivery receipts
# Must be HTTPS and match Twilio webhook configuration
STATUS_CALLBACK_URL=https://api.yourdomain.com/api/v1/whatsapp/status

# Verify token for webhook security
WHATSAPP_VERIFY_TOKEN=your_secure_verify_token_here_min_16_chars

# Twilio security parameters
TWILIO_CLOCK_SKEW_MS=30000
TWILIO_NONCE_WINDOW_MS=300000
FORCE_TWILIO_VERIFY=false

# Message delivery tracking
TRACK_MESSAGE_RECEIPTS=true
TRACK_MESSAGE_READS=false

# Message queue configuration
WHATSAPP_USE_QUEUE=true
WHATSAPP_WORKERS=5
WHATSAPP_MAX_RETRIES=3

# Force Twilio signature verification (set to true in production)
FORCE_TWILIO_VERIFY=false

# -----------------------------------------------------------------------------
# OPENAI (Optional - for AI features)
# -----------------------------------------------------------------------------
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4

# -----------------------------------------------------------------------------
# EMAIL (Optional - for notifications)
# -----------------------------------------------------------------------------
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
ADMIN_EMAIL=admin@yourcompany.com

# -----------------------------------------------------------------------------
# RATE LIMITING
# -----------------------------------------------------------------------------
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# -----------------------------------------------------------------------------
# LOGGING
# -----------------------------------------------------------------------------
LOG_LEVEL=info
LOG_FILE_PATH=./logs

# -----------------------------------------------------------------------------
# CORS (for frontend)
# -----------------------------------------------------------------------------
CORS_ORIGIN=http://localhost:3001,http://localhost:3000

# -----------------------------------------------------------------------------
# ADMIN CREDENTIALS (Initial Setup)
# -----------------------------------------------------------------------------
ADMIN_PHONE=+9779800000000
ADMIN_PASSWORD=change_this_password_immediately

# -----------------------------------------------------------------------------
# FEATURE FLAGS
# -----------------------------------------------------------------------------
ENABLE_BIDDING=true
ENABLE_CREDIT_SYSTEM=true
ENABLE_AUTO_RECOVERY=true
ENABLE_DAILY_REPORTS=true

# -----------------------------------------------------------------------------
# STAGING/TESTING
# -----------------------------------------------------------------------------
# Use mock Twilio in development
USE_MOCK_TWILIO=true
MOCK_TWILIO_URL=http://localhost:3001

# Seed database on startup
AUTO_SEED=false